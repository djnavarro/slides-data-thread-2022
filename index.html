<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Doing more with data: An introduction to Arrow for R users</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <meta name="github-repo" content="djnavarro/slides-data-thread-2022"/>
    <meta name="twitter:title" content="Doing more with data: An introduction to Arrow for R users"/>
    <meta name="twitter:description" content="An example slide deck using the Voltron Data template for xaringan"/>
    <meta name="twitter:url" content="https://djnavarro.net/xaringan-template-voltrondata"/>
    <meta name="twitter:image" content="https://djnavarro.net/xaringan-template-voltrondata/img/title-slide-image.png"/>
    <meta name="twitter:image:alt" content="Image showing the title slide. The title in white reads &#39;Voltron Data template for xaringan users&#39;, with &#39;by Danielle Navarro&#39; immediately underneath. The background is dark green, with the Voltron Data &#39;data lake&#39; image shown in light green below the title, and the company logo shown in light green in the top right corner"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:creator" content="@djnavarro"/>
    <meta name="twitter:site" content="@djnavarro"/>
    <meta property="og:title" content="Doing more with data: An introduction to Arrow for R users"/>
    <meta property="og:description" content="An example slide deck using the Voltron Data template for xaringan"/>
    <meta property="og:url" content="https://djnavarro.net/xaringan-template-voltrondata"/>
    <meta property="og:image" content="https://djnavarro.net/xaringan-template-voltrondata/img/title-slide-image.png"/>
    <meta property="og:image:alt" content="Image showing the title slide. The title in white reads &#39;Voltron Data template for xaringan users&#39;, with &#39;by Danielle Navarro&#39; immediately underneath. The background is dark green, with the Voltron Data &#39;data lake&#39; image shown in light green below the title, and the company logo shown in light green in the top right corner"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="article:author" content="Danielle Navarro"/>
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <link rel="stylesheet" href="style/xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="style/voltron-data-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">












layout: true

&lt;div class="my-footer"&gt;
&lt;span&gt;
  &lt;!-- 
  You could put a footer link in here, which I used to do for a lot of my
  other slide decks, but it probably doesn't work well with this theme
  --&gt;
&lt;/span&gt;
&lt;/div&gt; 

---


class: title-slide, theme-green-maximal  &lt;!-- title slide style --&gt;


.center[.large[.boldface[Doing more with data: An introduction to Arrow for R users]]]  &lt;!-- title, one line --&gt;

.center[.midi[by Danielle Navarro]] &lt;!-- author, one line --&gt;
.center[.midi[[djnavarro.net/slides-data-thread-2022](http://djnavarro.net/slides-data-thread-2022)]] &lt;!-- general info, one line --&gt;

&lt;!--
font-size classes (relative to normal 100%)

.larger = 200% 
.large  = 130% 
.midi   = 85% 
.small  = 70% 
.xsmall = 60% 
.tiny   = 50% 
--&gt;


&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green

## Who is Danielle Navarro?

- Developer advocate at Voltron Data
- Data scientist and generative artist
- General nuisance in the R community
- Tweets incessantly at [@djnavarro](https://twitter.com/djnavarro)



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green

## What is Apache Arrow?

- Toolbox for in-memory analytics
- Toolbox for larger than memory data
- Toolbox for connecting languages and hardware
- Efficient, performant, open source
- Details at [arrow.apache.org](https://arrow.apache.org)



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green

## Who is this talk for?

- R users who want to understand Apache Arrow
- Arrow developers who want to understand the R community
- Anyone who wants to see me make a fool of myself




&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green

## What does this talk cover?

- The "big idea" behind Arrow
- An overview of the {arrow} R package
- Example analyses using NYC taxi data set (~1.7 billion rows)
- Links to additional resources!




&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-light-maximal

## Apache Arrow: The big idea




&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## What if things were better...

- Insert the motivating example here




&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## Serialisation costs set the "data exchange rate"

.pull-left-narrow[
- Convert and copy
- Serialisation costs
- Much pain!
]

.pull-right-wide[
&lt;img src="img/data-interchange.svg" height="100%" /&gt;
]



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## Standardisation lowers costs

.pull-left-narrow[
- Agreed format
- Shared memory
- Fast, efficient
]

.pull-right-wide[
&lt;img src="img/data-interchange-arrow.svg" height="100%" /&gt;
]



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## Columnar formats are efficient

- Self-similarity among column elements
- Filtering operations are faster




&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-light-maximal

## Connecting Arrow and R



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## How does R fit into the Arrow ecosystem?

- Explain relation between {arrow} and C++ libarrow
- C++ implementation links to Python, etc
- Other languages


&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## How does Arrow fit into the R ecosystem?

- Explain the {dplyr} back end 
- Intent is to let users write "native R" code for Arrow objects





&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## How do new users get started?

- Simply by typing `install.packages("arrow")`
- Links to resources go here





&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-light-maximal

## Let's see it in action!





&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## The NYC taxi data

- Do some fancy pants stuff, show off joins
- Airport trips is a nice trick for that
- Appeal to R users by mapping with geom_sf






&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-light-maximal

## Getting a deeper understanding






&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## Where does the new R user go?

- Cookbooks
- Blogposts
- Workshops



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## How can the Arrow community help?

- Looking at our docs from a new user perspective
- Putting together novice friendly tutorials
- Being visible and helpful where we can!











&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-maximal

## class: theme-green-maximal

- good for section titles
- especially with helper classes added



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green

## class: theme-green

- good for content slides with very little text or code
- links display in orange, https://arrow.apache.org
- inline code is light green, `library(arrow)`



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## class: theme-green-minimal

- good for content slides with more text or code
- links display in orange, https://arrow.apache.org
- inline code is light green, `library(arrow)`
- code blocks use solarized-dark theme:


```r
runif(1000) |&gt;
  sqrt() |&gt;
  quantile(probs = seq(0, 1, .1))
```

```
##         0%        10%        20%        30%        40%        50%        60% 
## 0.01848817 0.32447351 0.45628372 0.55152209 0.63832275 0.71427744 0.77847637 
##        70%        80%        90%       100% 
## 0.83779146 0.89754058 0.95964497 0.99965145
```


&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## class: theme-green-minimal

this is what block quotes look like:

&gt; lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum




&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-light

## class: theme-light

- theme-light mirrors theme-green in structure
- there is also a theme-light-minimal and theme-light-maximal
- links display in darker orange, https://arrow.apache.org
- inline code is darker green, `library(arrow)`



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-light-minimal

## class: theme-light-minimal

.pull-left[
- pull-left makes a left column
- pull-right makes a right column
- code can nest within a column:

```r
sydney_time &lt;- lubridate::now()
berlin_time &lt;- sydney_time |&gt; 
  lubridate::with_tz("Europe/Berlin")
```
]

--

.pull-right[
- handy to show code on the left
- then reveal results on the right:

```r
sydney_time
berlin_time
```

```
## [1] "2022-05-26 13:01:31 AEST"
## [1] "2022-05-26 05:01:31 CEST"
```
]


&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-dark

## class: theme-dark

- theme-dark, theme-dark-minimal, and theme-dark-maximal
- links display in orange, https://arrow.apache.org
- inline code is light green, `library(arrow)`


&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-dark

## class: theme-dark

.pull-left-wide[
- pull-left-wide makes a 70%-width column
- pull-right-wide makes a 70%-width column
- pull-left-narrow makes a 30%-width column
- pull-right-narrow makes a 30%-width column
]

--

.pull-right-narrow[

```r
runif(1000) |&gt;
  sqrt() |&gt;
  mean()
```

```
## [1] 0.6578119
```
]


---

class: theme-dark-nologo

## class: theme-dark-minimal-nologo

- every theme has a "nologo" version
- prevents title and logo competing for audience attention


&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## A slide with flair

- the flair package allows fancy code decoration
- docs: https://r-for-educators.github.io/flair/



.pull-left-wide[
&lt;!-- 
The pull left wide class is used here for aesthetic purposes. It 
prevents the background colour from the code block extending too 
far rightwards
--&gt;

&lt;code class ='r hljs remark-code'&gt;"analysis01&lt;span style='background-color:#000000'&gt;_descriptive-statistics&lt;/span&gt;.R"&lt;br&gt;"analysis02&lt;span style='background-color:#000000'&gt;_preregistered-analysis&lt;/span&gt;.R"&lt;br&gt;"notes01&lt;span style='background-color:#000000'&gt;_realising-the-problem&lt;/span&gt;.txt"&lt;br&gt;"analysis03&lt;span style='background-color:#000000'&gt;_departing-from-the-plan&lt;/span&gt;.R"&lt;br&gt;"notes02&lt;span style='background-color:#000000'&gt;_tentative-write-up&lt;/span&gt;.docx"&lt;/code&gt;
]


&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-minimal

## A slide with ggplot2 themes

.pull-left[

```r
ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  labs(
    x = "engine displacement", 
    y = "highway mileage",
    title = "An example plot",
    subtitle = "Theme based on theme_bw()"
  ) + 
  facet_wrap(vars(year)) + 
  theme_voltron_light()
```
]

--

.pull-right[
![](index_files/figure-html/run-ggplot-example-1.png)&lt;!-- --&gt;
]



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-light-minimal

## A slide with ggplot2 themes

.pull-left[

```r
ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  labs(
    x = "engine displacement", 
    y = "highway mileage",
    title = "An example plot",
    subtitle = "Theme based on theme_dark()"
  ) + 
  facet_wrap(vars(year)) + 
  theme_voltron_dark()
```
]

.pull-right[
![](index_files/figure-html/run-ggplot-example-light-1.png)&lt;!-- --&gt;
]



&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-dark-minimal

## A slide with ggplot2 themes

.pull-left[

```r
ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  labs(
    x = "engine displacement", 
    y = "highway mileage",
    title = "An example plot",
    subtitle = "Theme based on theme_dark()"
  ) + 
  facet_wrap(vars(year)) + 
  theme_voltron_light()
```
]

.pull-right[
![](index_files/figure-html/run-ggplot-example-dark-1.png)&lt;!-- --&gt;
]


&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green

## Using font-awesome icons in lists

&lt;!-- 
embedding raw html is handy for things like using font-awesome icons as
the bullets in list 
--&gt;
&lt;ol class="fa-ul"&gt;
  &lt;li&gt;&lt;span class="fa-li"&gt;&lt;i class="fas fa-check-square"&gt;&lt;/i&gt;&lt;/span&gt;Completed task&lt;/li&gt;
  &lt;li&gt;&lt;span class="fa-li"&gt;&lt;i class="fas fa-check-square"&gt;&lt;/i&gt;&lt;/span&gt;Completed task&lt;/li&gt;
  &lt;li&gt;&lt;span class="fa-li"&gt;&lt;i class="fas fa-spinner fa-pulse"&gt;&lt;/i&gt;&lt;/span&gt;Work in progress&lt;/li&gt;
  &lt;li&gt;&lt;span class="fa-li"&gt;&lt;i class="far fa-square"&gt;&lt;/i&gt;&lt;/span&gt;Future work&lt;/li&gt;
&lt;/ol&gt;


&lt;!----------------------------- SLIDE BREAK -----------------------------&gt;
---

class: theme-green-maximal

## Final slide with key points and links

.pull-left[
- xaringan templates are cool
- this is a work in progress
- please send bug reports!
]

.pull-right[
&lt;ol class="fa-ul"&gt;
  &lt;li&gt;&lt;span class="fa-li"&gt;&lt;i class="fa fa-twitter"&gt;&lt;/i&gt;&lt;/span&gt;twitter.com/djnavarro&lt;/li&gt;
  &lt;li&gt;&lt;span class="fa-li"&gt;&lt;i class="fa fa-github"&gt;&lt;/i&gt;&lt;/span&gt;github.com/djnavarro&lt;/li&gt;
  &lt;li&gt;&lt;span class="fa-li"&gt;&lt;i class="fa fa-globe"&gt;&lt;/i&gt;&lt;/span&gt;djnavarro.net&lt;/li&gt;
&lt;/ol&gt;
]





    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "solarized-dark",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc((%current% - 1) / (%total% - 1)* 100%);\">\n  </div>\n</div>"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
